import{r as x,j as e}from"./index-DHHWhJg0.js";import{C as L,a as R,S as q}from"./StatsModal-CxG6TV7V.js";import{f as u,A as D,a as W,r as N}from"./numberUtils-icUVAo1-.js";import{I as z}from"./input-DdH-odB1.js";import{S as $,A as V}from"./switch-By-SFKdM.js";import{u as G}from"./quizHooks-lLxIOt3_.js";import"./index-CjhZW2GA.js";const K=({fromUnit:l,toUnit:s})=>{const i=Y(l,s);return e.jsx("div",{className:"flex flex-wrap items-center gap-1 p-3 rounded-lg shadow-inner sm:gap-2 sm:p-4 bg-gradient-to-r from-blue-50 to-purple-50",children:i.map((r,c)=>[e.jsx("div",{className:`px-2 sm:px-3 py-1 text-xs sm:text-sm rounded-md shadow-sm ${H(r)}`,children:r},r),c<i.length-1&&e.jsx(V,{className:"flex-shrink-0 w-3 h-3 text-indigo-400 sm:w-4 sm:h-4"},`path-arrow-from-${r}-to-${i[c+1]}`)])})},a=["bits","bytes","kilobytes","megabytes","gigabytes","terabytes","petabytes"],H=l=>({bits:"bg-purple-100 text-purple-900",bytes:"bg-blue-100 text-blue-900",kilobytes:"bg-cyan-100 text-cyan-900",megabytes:"bg-teal-100 text-teal-900",gigabytes:"bg-green-100 text-green-900",terabytes:"bg-amber-100 text-amber-900",petabytes:"bg-orange-100 text-orange-900"})[l]||"bg-gray-100",Y=(l,s)=>{const i=a.indexOf(l),r=a.indexOf(s),c=[];if(l==="bits"&&s!=="bits"){c.push("bits","bytes");let t=1;for(;t<r;)c.push(a[t+1]),t++}else if(s==="bits"&&l!=="bits"){let t=i;for(;t>1;)c.push(a[t]),t--;c.push("bytes","bits")}else{const t=i<r?1:-1;for(let o=i;o!==r+t;o+=t)c.push(a[o])}return c},P=(l,s)=>{const i=a.indexOf(l),r=a.indexOf(s);return Math.abs(r-i)},Q=l=>({bytes:1,kilobytes:1e3,megabytes:1e6,gigabytes:1e9,terabytes:1e12,petabytes:1e15})[l],J=(l,s,i)=>{let r;return s==="bits"?r=l/8:r=l*Q(s),i==="bits"?r*8:r/Q(i)},X=(l,s,i)=>{const r=a.indexOf(s),c=a.indexOf(i),t=[];t.push({title:"Identify the conversion",details:[`Starting value: ${u(l)} ${s}`,`Target unit: ${i}`]});const o=[];let d=r,n=l;if(d<c)for(;d<c;){let h=`Convert ${u(n)} ${a[d]} to ${a[d+1]}`;d===0?(n=N(n/8),h+=` â†’ ${u(n*8)} Ã· 8 = ${u(n)} ${a[d+1]}`):(n=N(n/1e3),h+=` â†’ ${u(n*1e3)} Ã· 1,000 = ${u(n)} ${a[d+1]}`),o.push(h),d++}else for(;d>c;){let h=`Convert ${u(n)} ${a[d]} to ${a[d-1]}`;d===1?(n=N(n*8),h+=` â†’ ${u(n/8)} Ã— 8 = ${u(n)} ${a[d-1]}`):(n=N(n*1e3),h+=` â†’ ${u(n/1e3)} Ã— 1,000 = ${u(n)} ${a[d-1]}`),o.push(h),d--}return t.push({title:"Step-by-step conversion",details:o}),t},w=(l,s,i,r,c=!1)=>{l(!1);let t,o;const d=c?3:1;do t=a[Math.floor(Math.random()*(a.length-1))],o=a[Math.floor(Math.random()*a.length)];while(t===o||P(t,o)>d);const n=t==="bits"||t==="bytes"?300:999,h=P(t,o),v=Math.max(10,Math.floor(n/h)),f=Math.floor(Math.random()*v)+1;let g;if(t==="bits")g=Math.ceil(f/8)*8;else if(t==="bytes"&&o==="bits"){const j=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,20,24,25,30,32,40,48,50,60,64,75,80,96,100,120,125,128,150,160,180,200,220,240,250,256];g=j[Math.floor(Math.random()*j.length)]}else g=f;const y=J(g,t,o),C={category:"Converting Units",finalValue:g,fromUnit:t,toUnit:o,answer:y,explanation:X(g,t,o)};s(C),i(""),r(null)};function Z({onScoreUpdate:l}){const[s,i]=x.useState(null),[r,c]=x.useState(""),[t,o]=x.useState(null),[d,n]=x.useState(!1),[h,v]=x.useState(!1),[f,g]=x.useState(!1),[y,C]=x.useState(!1),{handleAnswerChange:j,handleSubmit:B,inputRef:b}=G(s,r,c,d,n,o,l),k=x.useId(),I=x.useId(),S=x.useId(),M=x.useId(),E=x.useId(),U=x.useId(),A=x.useId(),F=x.useId();x.useEffect(()=>{w(n,i,c,o,h)},[h]),x.useEffect(()=>{const m=p=>{p.key==="Enter"&&d&&s&&document.activeElement!==b.current&&(w(n,i,c,o,h),setTimeout(()=>{b.current&&b.current.focus()},100))};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[d,s,h]);const T=m=>`Convert ${u(m.finalValue)} ${m.fromUnit} to ${m.toUnit}`;return e.jsxs("main",{className:"w-full","aria-labelledby":k,children:[e.jsx("h1",{id:k,className:"sr-only",children:"Unit Converter"}),e.jsx("div",{className:"p-2 sm:p-4",children:e.jsx(L,{className:"py-0 mx-auto shadow-xl bg-white/80 backdrop-blur",children:e.jsxs(R,{className:"p-4 space-y-4 sm:p-6 lg:p-8 sm:space-y-6",children:[e.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",children:t?.message}),s?e.jsxs("section",{"aria-labelledby":I,children:[e.jsx("h2",{id:I,className:"p-6 text-lg font-semibold text-white bg-indigo-600 rounded-lg shadow",children:T(s)}),e.jsx("form",{onSubmit:B,className:"mt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:S,className:"sr-only",children:["Your answer for: ",T(s)]}),e.jsx(z,{id:S,ref:b,type:"text",inputMode:"numeric",value:r?r.includes(".")&&r.endsWith(".")||r.endsWith("0")?r:u(Number(r)):"",onChange:j,placeholder:"Enter your answer and press Enter",disabled:d,"aria-describedby":`${M} ${E}`,"aria-invalid":t&&!t.isCorrect?"true":"false",className:"p-6 text-lg font-bold text-center transition-all duration-200 border-2 border-indigo-200 shadow-lg text-foreground sm:text-2xl focus:border-indigo-500 focus:ring-4 focus:ring-indigo-200 rounded-xl bg-gradient-to-r from-white to-indigo-50"})]})}),t&&e.jsx("div",{className:"mt-6",children:e.jsx(D,{id:F,"aria-live":"polite",className:`border-2 shadow-lg ${t.isCorrect?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-300 shadow-green-100":"bg-gradient-to-r from-red-50 to-pink-50 border-red-300 shadow-red-100"}`,children:e.jsx(W,{children:e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-lg ${t.isCorrect?"bg-gradient-to-r from-green-100 to-emerald-100":"bg-gradient-to-r from-red-100 to-pink-100"}`,children:[e.jsxs("div",{className:`flex items-center text-xl font-bold ${t.isCorrect?"text-green-800":"text-red-800"}`,children:[e.jsx("span",{className:"mr-3 text-2xl",children:t.isCorrect?"ðŸŽ‰":"âŒ"}),e.jsx("span",{children:t.isCorrect?"Excellent work!":"Not quite right"})]}),!t.isCorrect&&e.jsxs("div",{className:"mt-2 font-semibold text-red-700",children:["The correct answer is"," ",e.jsx("span",{className:"px-2 py-1 text-red-900 bg-red-200 rounded",children:u(s.answer)})]})]}),e.jsx("div",{className:"flex justify-center pt-2",children:e.jsxs("button",{type:"button",onClick:()=>{w(n,i,c,o,h),setTimeout(()=>{b.current&&b.current.focus()},100)},"aria-label":"Generate next question",className:"px-8 py-3 font-semibold text-white transition-all duration-200 transform rounded-lg shadow-lg bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 hover:shadow-xl hover:-translate-y-1",children:[e.jsx("span",{className:"mr-2",children:"ðŸŽ¯"}),"Next Question"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center mb-3 text-lg font-bold text-indigo-900",children:[e.jsx("span",{className:"mr-2",children:"ðŸ“š"}),"Step-by-step explanation:"]}),t.explanation.map((m,p)=>e.jsxs("div",{className:"p-4 bg-white bg-opacity-50 border border-gray-200 rounded-lg",children:[e.jsxs("h4",{className:"flex items-center mb-2 text-base font-bold text-indigo-900",children:[e.jsx("span",{className:"flex items-center justify-center flex-shrink-0 w-6 h-6 mr-3 text-sm font-semibold text-indigo-800 bg-indigo-100 rounded-full",children:p+1}),m.title]}),e.jsx("ul",{className:"space-y-1 ml-9",children:m.details.map(O=>e.jsxs("li",{className:"text-gray-800",children:[e.jsx("span",{className:"mr-2 text-indigo-600",children:"â€¢"}),O]},O))})]},m.title))]})]})})})}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"p-3 border border-gray-200 rounded-lg sm:p-4 bg-gradient-to-r from-gray-50 to-blue-50",children:e.jsxs("div",{className:"flex flex-col items-start justify-between gap-3 sm:flex-row sm:items-center sm:gap-4",children:[e.jsxs("div",{className:"flex items-center min-w-0 gap-2",children:[e.jsx("span",{className:"text-base sm:text-lg",children:"ðŸ“‹"}),e.jsx("span",{className:"text-xs font-semibold text-gray-800 truncate sm:text-sm",children:"Units Order"}),e.jsx($,{checked:f,onCheckedChange:g,className:"data-[state=unchecked]:bg-gray-200 data-[state=checked]:bg-blue-600 flex-shrink-0","aria-label":"Toggle units order hint",title:"Show/hide the ordered list of units from smallest to largest"})]}),e.jsxs("div",{className:"flex items-center min-w-0 gap-2",children:[e.jsx("span",{className:"text-base sm:text-lg",children:"ðŸ—ºï¸"}),e.jsx("span",{className:"text-xs font-semibold text-gray-800 truncate sm:text-sm",children:"Conversion Path"}),e.jsx($,{checked:y,onCheckedChange:C,className:"data-[state=unchecked]:bg-gray-200 data-[state=checked]:bg-blue-600 flex-shrink-0","aria-label":"Toggle conversion path hint",title:"Show/hide the step-by-step conversion path between units"})]}),e.jsxs("div",{className:"flex items-center min-w-0 gap-2",children:[e.jsx("span",{className:"text-base sm:text-lg",children:"âš™ï¸"}),e.jsx("span",{className:"text-xs font-semibold text-gray-800 truncate sm:text-sm",children:"Advanced Mode"}),e.jsx($,{checked:h,onCheckedChange:m=>{v(m),w(n,i,c,o,m)},className:"data-[state=unchecked]:bg-gray-200 data-[state=checked]:bg-blue-600 flex-shrink-0","aria-label":"Toggle advanced mode",title:"Enable harder questions with decimal values and complex conversions"})]})]})})}),f&&e.jsxs("section",{id:M,"aria-labelledby":U,className:"mt-6",children:[e.jsxs("h3",{id:U,className:"flex items-center mb-3 font-semibold text-blue-800",children:[e.jsx("span",{className:"mr-2 text-lg",children:"ï¿½"}),"Units in order (smallest to largest)"]}),e.jsx("div",{className:"p-4 border-l-4 border-purple-400 rounded-r-lg shadow-inner bg-gradient-to-r from-blue-50 to-indigo-50",children:e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:a.map((m,p)=>[e.jsx("span",{className:`px-2 py-1 rounded text-sm ${H(m)}`,children:m},m),p<a.length-1&&e.jsx(V,{className:"w-4 h-4 text-purple-400"},`arrow-from-${m}-to-${a[p+1]}`)])})})]}),y&&e.jsxs("section",{id:E,"aria-labelledby":A,className:"mt-6",children:[e.jsxs("h3",{id:A,className:"flex items-center mb-3 font-semibold text-purple-800",children:[e.jsx("span",{className:"mr-2 text-lg",children:"ðŸ—ºï¸"}),"Path for this conversion"]}),e.jsx("div",{className:"border-l-4 border-purple-400 rounded-r-lg shadow-inner bg-gradient-to-r from-purple-50 to-pink-50",children:e.jsx(K,{fromUnit:s.fromUnit,toUnit:s.toUnit})})]})]}):e.jsx("div",{className:"py-8 text-center",children:e.jsx("p",{className:"text-gray-600",children:"Unable to load question. Please reload the page or contact admin if the issue persists."})})]})})})]})}function le(){return e.jsx(q,{children:l=>e.jsx(Z,{onScoreUpdate:l})})}export{le as component};
